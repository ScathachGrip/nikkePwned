/**
 * ~(*â‰§Ï‰â‰¦) Autogenerates an `index.html` probably skill issue though â˜ğŸ˜ˆ
 * 
 * - I focus on **backend logic and app fwoooow things~** so this HTML is **autogenerated~**  
 *   instead of wasting my time with nerdy YUAI YUEKS design! >:3  
 * - This minimal template covers all elements for now:
 *   - ğŸŒ¸ Registering accounts  
 *   - ğŸ€ Selecting and removing accounts  
 *   - ğŸ’» Auto-login magic! âœ¨  
 * - The design is **dark mode supremacy** because light mode is for normies.  
 * - The generated file is saved as `resources/index.html` like a good little script! (*â‰§â–½â‰¦)  
 * - Logs success if it works, and if not... ugh, I guess itâ€™s **yabai time**. ğŸ’€
 * - Hnnnnnnng, maybe later I should use Nuxt or Next.js... but for now, it's just **plain vanilla**. â˜ğŸ˜”
 * - You should do PR if u can fix me senpai~! â˜ğŸ¥º
 * 
 * - This bundle is mandatory for the app to work: Let me know if you want moar desu~! ğŸ¦ğŸ˜© 
 *   - ğŸ“¦ `<script src="js/neutralino.js"></script>` â†’ Loads the Neutralino magic lib!  
 *   - ğŸ“¦ `<script src="js/app.js"></script>` â†’ Loads compiled files and handles the appâ€™s cute flows. ğŸ’–  
 * 
 * @requires fs - Node.js File System module for saving the file~ âœ¨  
 * @throws {Error} Logs a big fat **yabai time**. ğŸ’€ if file writing fails. (â•¯Â°â–¡Â°ï¼‰â•¯ï¸µ â”»â”â”»  
 */


// eslint-disable-next-line @typescript-eslint/no-explicit-any
declare const require: any;
const fs = require("fs");

const htmlContent = `
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Index</title>
    <link rel="icon" type="image/x-icon" href="/icons/favicon.ico">
    <style>
body {
    font-family: Arial, sans-serif;
    background-color: #1e1e2e;
    color: #ffffff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
}
.container {
    width: 90%;
    max-width: 400px;
    background: #2a2a3b;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}
textarea {
    width: 100%;
    height: 100px;
    background: #333344;
    color: white;
    border: none;
    padding: 10px;
    border-radius: 5px;
    resize: none;
    box-sizing: border-box; /* Fix ukuran agar padding tidak bikin ukuran kacau */
}
select, button {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
}
select {
    background: #444455;
    color: white;
}
#registerBtn {
    background: #007bff;
    color: white;
}
#registerBtn:hover {
    background: #529be8;
}
#runBtn {
    background: #28a745;
    color: white;
}

#runBtn:hover {
    background: #68e986;
}
#removeBtn {
    background: #a20a0a; 
    color: white;
}
#removeBtn:hover {
    background: #d74141;
}

.responsive-img {
    width: 100%;
    height: auto;
    max-width: 400px;
    display: block;
    margin: 0 auto; 
}
#selectPathBtn {
    margin-left: 3px;
    background-color: #007bff; 
    color: white;
    font-size: 12px;
    border: none;
    padding: 3px 9px; 
    cursor: pointer;
    border-radius: 3px;
    width: auto; 
    min-width: 50px; 
}
#selectPathBtn:hover {
    background-color: #529be8;
}
#pathContainer {
    display: flex;
    align-items: center;
    gap: 5px;
}
#selectedPath {
    font-family: monospace;
    white-space: nowrap; 
    overflow: hidden;
    text-overflow: ellipsis; 
}


/* Base Snackbar container */
#snackbar {
  visibility: hidden;
  max-width: 320px;
  color: #fff;
  text-align: left;
  border-radius: 8px;
  padding: 14px 16px;
  position: fixed;
  z-index: 1000;
  top: 20px;
  right: 20px;
  font-size: 14px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
  display: flex;
  flex-direction: column;
  gap: 8px;
  opacity: 0;
  transform: translateY(-10px);
  transition: opacity 0.3s, transform 0.3s;
}

/* Success Snackbar */
#snackbar.success {
  background-color: #222; /* Dark gray */
}

/* Fail Snackbar */
#snackbar.fail {
  background-color:rgb(133, 12, 12); /* Red */
}

/* Show Snackbar */
#snackbar.show {
  visibility: visible;
  opacity: 1;
  transform: translateY(0);
}

/* Snackbar Text */
#snackbar-text {
  flex: 1;
  word-wrap: break-word;
}

/* Loading Bar */
.progress {
  height: 4px;
  width: 100%;
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 2px;
  overflow: hidden;
  position: relative;
}

.progress-bar {
  height: 100%;
  width: 0%;
  position: absolute;
  left: 0;
  top: 0;
}

/* Success Bar */
#snackbar.success .progress-bar {
  background-color:rgb(145, 255, 0); /* Orange */
}

/* Fail Bar */
#snackbar.fail .progress-bar {
  background-color:rgb(166, 255, 0); /* Bright Red */
}

/* Responsive: Adjust for small screens */
@media (max-width: 600px) {
  #snackbar {
    max-width: 90%;
    right: 5%;
    left: auto;
    font-size: 13px;
    padding: 12px;
  }
}

</style>

</style>
</head>
<body>
    <div class="container">
        <img src="/icons/logo.png" alt="Description" class="responsive-img">
        <div id="pathContainer" style="display: flex; align-items: center;">
            <pre id="selectedPath">Please select where nikke_launcher.exe was installed.</pre>
            <button id="selectPathBtn">Edit</button>
        </div>
        <textarea id="jsonInput" placeholder="Enter account JSON here..."></textarea>
        <button id="registerBtn">ğŸ”‘Register Accounts</button>
        <br><br>
        <select id="accountSelect">
            <option value="">Select account</option>
        </select>
        <button id="runBtn">Proceed auto login</button>
        <br>
        <button id="removeBtn">or Remove account</button>
    </div>
<div id="snackbar">
  <span id="snackbar-text"></span>
  <div class="progress"><div class="progress-bar"></div></div>
</div>


    <p>Password Manager for NIKKE v<span id="appVersion">Loading...</span></p>
    <script src="js/neutralino.js"></script>  
    <script src="js/app.js"></script>
</body>
</html>
`;

try {
  fs.writeFileSync("resources/index.html", htmlContent, "utf-8");
  console.log("âœ… index.html created successfully.");
} catch (error) {
  console.error("âŒ Failed to create index.html:", error);
}
